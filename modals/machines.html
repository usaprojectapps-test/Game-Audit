<div id="machines-module" class="module-wrapper machines-module">

  <!-- LEFT SIDE: TABLE + HEADER -->
  <div class="module-left">
    <div class="card-header">Machine Management</div>

    <!-- SEARCH + FILTERS + BUTTONS IN ONE ROW -->
     <div class="module-left-inner">
    <div class="filters-row">
      <input type="text" id="machines-search-input" class="input" placeholder="Search by Machine ID or Name" />
      <select id="machines-health-filter" class="select">
        <option value="">All</option>
        <option value="Good">Good</option>
        <option value="Warning">Warning</option>
        <option value="Critical">Critical</option>
      </select>
      <select id="machines-location-filter" class="select superadmin-only">
        <option value="">All locations</option>
      </select>
      <button id="machines-refresh-btn" class="btn btn-secondary">Refresh</button>
      <button id="machines-export-csv-btn" class="btn btn-secondary">Export CSV</button>
      </div>
     </div>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Machine ID</th>
            <th>Machine Name</th>
            <th>Vendor</th>
            <th>Health</th>
            <th>Last Service</th>
            <th>Location</th>
          </tr>
        </thead>
        <tbody id="machines-table-body"></tbody>
      </table>
    </div>

    <div class="table-footer">
      <span id="machines-pagination-text">Showing 0 of 0</span>
      <div class="pagination-controls">
        <button id="machines-prev-page" class="btn btn-icon" disabled>&lt;</button>
        <span id="machines-current-page" class="pagination-page">1</span>
        <button id="machines-next-page" class="btn btn-icon" disabled>&gt;</button>
      </div>
    </div>
  </div>

  <!-- RIGHT SIDE: FORM -->
  <div class="module-right">
    <div class="card-header">Add Machine</div>

    <div class="form-grid">
      <div class="form-group">
        <label>Machine ID</label>
        <input type="text" id="machines-machineid-input" class="input" placeholder="M001" />
      </div>
      <div class="form-group">
        <label>Machine Name</label>
        <input type="text" id="machines-machinename-input" class="input" placeholder="Machine name" />
      </div>
      <div class="form-group">
        <label>Vendor</label>
        <select id="machines-vendor-select" class="select">
          <option value="">Select vendor</option>
        </select>
      </div>
      <div class="form-group superadmin-only">
        <label>Location</label>
        <select id="machines-location-select" class="select">
          <option value="">Select location</option>
        </select>
      </div>
      <div class="form-group">
        <label>Health Status</label>
        <select id="machines-health-select" class="select">
          <option value="Good">Good</option>
          <option value="Warning">Warning</option>
          <option value="Critical">Critical</option>
        </select>
      </div>
      <div class="form-group">
        <label>Installation Date</label>
        <input type="date" id="machines-lastservice-input" class="input" />
      </div>
    </div>

    <!-- NOTES + QR PREVIEW + QR BUTTONS IN 3 COLUMNS -->
    <div class="form-grid-3" style="margin-top: 16px;">
      <div class="form-group">
        <label>Notes</label>
        <textarea id="machines-notes-input" class="textarea" rows="2" style="resize: vertical;"></textarea>
      </div>

      <div class="form-group">
        <label>Machine QR Code</label>
        <div id="machines-qr-preview" class="qr-preview ticket-preview">
          <div id="machines-qr-canvas"></div>
          <div id="machines-qr-label" class="qr-label"></div>
        </div>
      </div>

      <div class="form-group">
        <label>&nbsp;</label>
        <div class="qr-button-column">
          <button id="machines-generate-qr-btn" class="btn btn-secondary">Generate QR</button>
          <button id="machines-print-qr-btn" class="btn btn-secondary">Print</button>
          <button id="machines-download-qr-btn" class="btn btn-secondary">Download</button>
        </div>
      </div>
    </div>

    <div class="form-actions button-row">
      <button id="machines-reset-btn" class="btn btn-secondary">Clear</button>
      <button id="machines-delete-btn" class="btn btn-danger">Delete</button>
      <button id="machines-save-btn" class="btn btn-primary">Save</button>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="machines-toast-container" class="toast-container"></div>
</div>
